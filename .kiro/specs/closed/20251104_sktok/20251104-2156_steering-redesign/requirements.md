<!-- SPEC Requirements Template -->

# Requirements: Steering構成の刷新

**Related SPECs**: steering-redesign

## Background & Context

### User Problems

現在のsteering構成（product.md/tech.md/structure.md）には以下の問題がある：

1. **可変情報と不変情報の混在**
   - Roadmap、Core Features、具体的なディレクトリ構造など、プロジェクトの進捗で変化する情報が含まれている
   - 「唯一の真実」として機能するには、普遍的な原則のみを記載すべき

2. **初期化時の品質のばらつき**
   - ヒアリングが浅く、表面的な質問のみ
   - 作成されるsteeringの内容が定まっておらず、品質にばらつきがある
   - エージェントが判断基準として活用できない抽象的な内容になりがち

3. **seedsの扱いが不安定**
   - seedsを読まずにコピーすることがある
   - structure作成後に設計思想seedをコピーするなど、順序が不適切
   - seedsとsteeringの役割分担が曖昧

4. **エージェントの判断基準として不十分**
   - 「何を作るか」は書けるが、「なぜ作るか」「どう判断するか」が弱い
   - トレードオフの優先順位、禁止事項、設計原則が明確でない

### Related Issues

- Q-SPEC駆動開発において、steeringはエージェントの判断基準となる最重要コンテキスト
- 初期化の品質が低いと、後続の全てのSPECの品質に影響する
- 「普遍的な真実」を記載することで、プロジェクトの進化に関わらず一貫性を保つ

## Objectives

1. **普遍的な真実を記載できるsteering構成の設計**
   - 不変の原則・価値観・制約のみを記載
   - 可変情報（実装状態）はsteeringから除外

2. **エージェントが判断基準として活用できる内容**
   - トレードオフの優先順位
   - 禁止事項と境界線
   - 設計の一貫性を保つルール

3. **高品質なsteeringを作成できる初期化プロセス**
   - 深いヒアリングによる情報収集
   - seeds選択・適用の適切な順序
   - 明確な完了基準

## Scope

### In Scope

1. **新しいsteering構成の設計**
   - vision.md: プロジェクトの存在理由
   - principles.md: 判断原則・価値観
   - constraints.md: 技術的境界線
   - architecture.md: 構造の哲学

2. **各steeringファイルのテンプレート作成**
   - 具体的な記載項目の定義
   - 記載例の提供
   - 「普遍的な真実」の判断基準

3. **初期化プロセスの再設計**
   - Q-SPECに基づく深いヒアリング質問
   - seeds選択・適用の順序定義
   - 完了基準の明確化

4. **project_startup.mdの更新**
   - 新しいsteering構成に対応
   - 初期化手順の詳細化

### Out of Scope

- steeringの更新・進化プロセス（別SPECで対応）
- 既存プロジェクトのsteering移行手順
- steering以外のコンテキストファイルの修正

## Detailed Requirements

### R1: 新しいsteering構成

**背景**: 現在のproduct/tech/structureは、一般的なドキュメント構成を模倣したものだが、エージェントの判断基準としては不適切。

**要件**:
- vision.md: プロジェクトが解決する問題、ターゲットユーザー、既存ソリューションとの違い、プロジェクトのゴール
- principles.md: 判断の優先順位、トレードオフの基準、設計の一貫性を保つルール
- constraints.md: 技術的制約、禁止事項、サポート範囲の境界線
- architecture.md: 構造の哲学、モジュール分割の原則、依存関係の方針

### R2: テンプレートの具体性

**背景**: 現在のテンプレートは抽象的すぎて、何を書けばいいか分からない。

**要件**:
- 各項目に記載例を含める
- 「普遍的な真実」と「可変情報」の区別を明示
- ヒアリングで引き出すべき情報を明確化

### R3: 初期化ヒアリングの深化

**背景**: 現在のヒアリングは表面的で、「なぜ」「どう判断するか」を引き出せていない。

**要件**:
- 推論ベースインタビューの質問例を充実
- プロジェクトの背景・動機を深掘りする質問
- トレードオフの優先順位を明確にする質問
- 技術選定の判断基準を引き出す質問

### R4: seeds適用の順序定義

**背景**: 設計思想seedsは構造に影響するため、適用順序が重要。

**要件**:
1. 設計思想seedsの選択・読み込み
2. architecture.mdの作成（設計思想を反映）
3. 技術スタックseedsの選択・読み込み
4. constraints.mdの作成（技術制約を反映）

### R5: 完了基準の明確化

**背景**: 現在は形式的なチェックリストのみで、内容の品質が保証されない。

**要件**:
- 各steeringファイルに「普遍的な真実」が記載されているか確認
- エージェントが判断基準として活用できる具体性があるか確認
- ユーザーとの認識齟齬がないか最終確認

---
**Created**: 2025-11-04
